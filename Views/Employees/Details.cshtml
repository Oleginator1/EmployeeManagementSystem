@model EmployeeManagementSystem.Models.ViewModels.EmployeeDetailsViewModel

@{
    ViewData["Title"] = "Employee Details";
}

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h3 class="mb-0">
                        <i class="bi bi-person-badge"></i> Employee Details
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        @* Profile Photo Column *@
                        <div class="col-md-3 text-center">
                            @if (!string.IsNullOrEmpty(Model.ProfilePhotoPath))
                            {
                                <img src="@Model.ProfilePhotoPath"
                                     alt="@Model.FullName"
                                     class="img-thumbnail rounded-circle mb-3"
                                     style="width: 200px; height: 200px; object-fit: cover;" />
                            }
                            else
                            {
                                <div class="rounded-circle bg-secondary text-white d-flex align-items-center justify-content-center mx-auto mb-3"
                                     style="width: 200px; height: 200px; font-size: 72px;">
                                    @Model.FullName.Substring(0, 1)
                                </div>
                            }

                            <h4>@Model.FullName</h4>
                            <p class="text-muted">@Model.JobTitleName</p>

                            @if (Model.IsActive)
                            {
                                <span class="badge bg-success fs-6">Active</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary fs-6">Inactive</span>
                            }
                        </div>

                        @* Details Column *@
                        <div class="col-md-9">
                            @* Personal Information *@
                            <h5 class="border-bottom pb-2 mb-3">
                                <i class="bi bi-person"></i> Personal Information
                            </h5>

                            <div class="row mb-2">
                                <div class="col-md-4 fw-bold">
                                    @Html.DisplayNameFor(model => model.FirstName):
                                </div>
                                <div class="col-md-8">
                                    @Html.DisplayFor(model => model.FirstName)
                                </div>
                            </div>

                            <div class="row mb-2">
                                <div class="col-md-4 fw-bold">
                                    @Html.DisplayNameFor(model => model.LastName):
                                </div>
                                <div class="col-md-8">
                                    @Html.DisplayFor(model => model.LastName)
                                </div>
                            </div>

                            <div class="row mb-2">
                                <div class="col-md-4 fw-bold">
                                    @Html.DisplayNameFor(model => model.Email):
                                </div>
                                <div class="col-md-8">
                                    <a href="mailto:@Model.Email">@Html.DisplayFor(model => model.Email)</a>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-4 fw-bold">
                                    @Html.DisplayNameFor(model => model.Phone):
                                </div>
                                <div class="col-md-8">
                                    @if (!string.IsNullOrEmpty(Model.Phone))
                                    {
                                        <a href="tel:@Model.Phone">@Html.DisplayFor(model => model.Phone)</a>
                                    }
                                    else
                                    {
                                        <span class="text-muted">Not provided</span>
                                    }
                                </div>
                            </div>

                            @* Employment Information *@
                            <h5 class="border-bottom pb-2 mb-3 mt-4">
                                <i class="bi bi-briefcase"></i> Employment Information
                            </h5>

                            <div class="row mb-2">
                                <div class="col-md-4 fw-bold">
                                    @Html.DisplayNameFor(model => model.DepartmentName):
                                </div>
                                <div class="col-md-8">
                                    @Html.DisplayFor(model => model.DepartmentName)
                                </div>
                            </div>

                            <div class="row mb-2">
                                <div class="col-md-4 fw-bold">
                                    @Html.DisplayNameFor(model => model.JobTitleName):
                                </div>
                                <div class="col-md-8">
                                    @Html.DisplayFor(model => model.JobTitleName)
                                </div>
                            </div>

                            <div class="row mb-2">
                                <div class="col-md-4 fw-bold">
                                    @Html.DisplayNameFor(model => model.Salary):
                                </div>
                                <div class="col-md-8">
                                    @Model.Salary.ToString("C")
                                </div>
                            </div>

                            <div class="row mb-2">
                                <div class="col-md-4 fw-bold">
                                    @Html.DisplayNameFor(model => model.HireDate):
                                </div>
                                <div class="col-md-8">
                                    @Model.HireDate.ToString("MMMM dd, yyyy")
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-4 fw-bold">
                                    @Html.DisplayNameFor(model => model.YearsOfService):
                                </div>
                                <div class="col-md-8">
                                    @Model.YearsOfService year@(Model.YearsOfService != 1 ? "s" : "")
                                </div>
                            </div>

                            @* Audit Information *@
                            <h5 class="border-bottom pb-2 mb-3 mt-4">
                                <i class="bi bi-clock-history"></i> Record Information
                            </h5>

                            <div class="row mb-2">
                                <div class="col-md-4 fw-bold">
                                    @Html.DisplayNameFor(model => model.CreatedDate):
                                </div>
                                <div class="col-md-8">
                                    @Model.CreatedDate.ToString("MMMM dd, yyyy hh:mm tt")
                                </div>
                            </div>

                            @if (Model.ModifiedDate.HasValue)
                            {
                                <div class="row mb-2">
                                    <div class="col-md-4 fw-bold">
                                        @Html.DisplayNameFor(model => model.ModifiedDate):
                                    </div>
                                    <div class="col-md-8">
                                        @Model.ModifiedDate.Value.ToString("MMMM dd, yyyy hh:mm tt")
                                    </div>
                                </div>
                            }
                        </div>
                    </div>

                    @* Action Buttons *@
                    <div class="row mt-4">
                        <div class="col-md-12">
                            @if (User.IsInRole("Admin") || User.IsInRole("Manager"))
                            {
                                <a asp-action="Edit"
                                   asp-route-id="@Model.EmployeeId"
                                   class="btn btn-warning">
                                    <i class="bi bi-pencil"></i> Edit
                                </a>
                                <a asp-action="Delete"
                                   asp-route-id="@Model.EmployeeId"
                                   class="btn btn-danger">
                                    <i class="bi bi-trash"></i> Delete
                                </a>
                            }
                                                        
                            <a asp-action="ExportDetailsPdf"
                               asp-route-id="@Model.EmployeeId"
                               class="btn btn-danger">
                                <i class="bi bi-file-pdf"></i> Export to PDF
                            </a>

                            <a asp-action="Index" class="btn btn-secondary">
                                <i class="bi bi-arrow-left"></i> Back to List
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>